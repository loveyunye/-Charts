<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width">
  <link rel="stylesheet" href="https://cache.amap.com/lbs/static/main1119.css" />
  <script src="https://webapi.amap.com/maps?v=2.0&key=a42eb4e040b919c197c21cec46364545&plugin=AMap.RangingTool"></script>
  <!-- <script src="https://webapi.amap.com/maps?v=2.0&key=a42eb4e040b919c197c21cec46364545&plugin=AMap.Map3D"></script> -->
  <script src="https://a.amap.com/jsapi_demos/static/demo-center/js/demoutils.js"></script>
  <link rel="stylesheet" href="https://a.amap.com/jsapi_demos/static/demo-center/css/demo-center.css" />
  <script src="https://a.amap.com/jsapi_demos/static/demo-center/js/demoutils.js"></script>
  <script src="https://npmcdn.com/@turf/turf@6.5.0/turf.min.js"></script>
  <style>
    .marker-circle {
      width: 40px;
      height: 40px;
      background-color: #fff;
      border-radius: 50%;
      text-align: center;
      line-height: 40px;
      font-size: 18px;
      transform: scale(0.4);
      transform-origin: center center;
    }
  </style>
</head>

<body>
  <div id="container"></div>
  <!-- <div class="input-card" style="width: 200px">
   <h4 style="margin-bottom: 10px; font-weight: 600">利用mouseTool绘制覆盖物</h4>
   <button class="btn" onclick="drawPolygon()" style="margin-bottom: 5px">绘制多边形</button> 
</div> -->


  <script>
    var map = new AMap.Map('container', {
      viewMode: '3D',
      showBuildingBlock: false,
      center: [115.886103, 28.64965],
      pitch: 0,
      zoom: 15.4,
      mapStyle: 'amap://styles/be91f0ee35cf36a2150890e2ff3beb55',
    });
    // new AMap.Polyline({
    //   map: map,
    //   path: [
    //     [115.84792, 28.688891],
    //     [115.84776, 28.688528],
    //     [115.848186, 28.688762],
    //     [115.848773, 28.689188],
    //     [115.848151, 28.6872],
    //     [115.847751, 28.686375],
    //     [115.847377, 28.685644],
    //     [115.846444, 28.683786],
    //     [115.846568, 28.683366],
    //     [115.847537, 28.682984],
    //     [115.848968, 28.682715],
    //     [115.868693, 28.67076],
    //     [115.868871, 28.669715],
    //     [115.868968, 28.668935],
    //     [115.869022, 28.668315],
    //     [115.869075, 28.667953],
    //     [115.869137, 28.6675],
    //     [115.869182, 28.666951],
    //     [115.869235, 28.666604],
    //     [115.869253, 28.666428],
    //     [115.86928, 28.666197],
    //     [115.869422, 28.665702],
    //     [115.86936, 28.665348],
    //     [115.869386, 28.665202],
    //     [115.869413, 28.664824],
    //     [115.869413, 28.664708],
    //     [115.869404, 28.66436],
    //     [115.869395, 28.66416],
    //     [115.86936, 28.663868],
    //     [115.86936, 28.663871],
    //     [115.869342, 28.663744],
    //     [115.869324, 28.663584],
    //     [115.869315, 28.663502],
    //     [115.869306, 28.663444],
    //     [115.86928, 28.663277],
    //     [115.869102, 28.662535],
    //     [115.869066, 28.662397],
    //     [115.867617, 28.659442],
    //     [115.866622, 28.657448],
    //     [115.86552, 28.655631],
    //     [115.867306, 28.654688],
    //     [115.868844, 28.653391],
    //     [115.868577, 28.652851],
    //     [115.868168, 28.651495],
    //     [115.868213, 28.650468],
    //     [115.868488, 28.650408],
    //     [115.868497, 28.650384],
    //     [115.870213, 28.649968],
    //     [115.87328, 28.64932],
    //     [115.874177, 28.648946],
    //   ],
    //   isOutline: true,
    //   outlineColor: '#F00',
    //   strokeColor: "#F00",
    //   borderWeight: 1,
    //   zIndex: 50,
    // })
    const goWork = [
        [115.85951, 28.69116],
        [115.859154, 28.690912],
        [115.85991, 28.69115],
        [115.859837, 28.69021],
        [115.858306, 28.687045],
        [115.858269, 28.685561],
        [115.88249, 28.67804],
        [115.883809, 28.678834],
        [115.885463, 28.67927],
        [115.887186, 28.679593],
        [115.886604, 28.679443],
        [115.886373, 28.679363],
        [115.886063, 28.679306],
        [115.885286, 28.679198],
        [115.882835, 28.678032],
        [115.881384, 28.676886],
        [115.88118, 28.676431],
        [115.880107, 28.673469],
        [115.880511, 28.669756],
        [115.8808, 28.667117],
        [115.880765, 28.666403],
        [115.88064, 28.665678],
        [115.879985, 28.663597],
        [115.879339, 28.662359],
        [115.878674, 28.661071],
        [115.877851, 28.659438],
        [115.876903, 28.657934],
        [115.878576, 28.657141],
        [115.880336, 28.655863],
        [115.88015, 28.655552],
        [115.879815, 28.654434],
        [115.879461, 28.652816],
        [115.881478, 28.65236],
        [115.884175, 28.651787],
      ]

    new AMap.Polyline({
      map: map,
      path: goWork,
      isOutline: true,
      outlineColor: '#00f',
      strokeColor: "#00f",
      borderWeight: 1,
      zIndex: 50,
    })

    // new AMap.Polyline({
    //   map: map,
    //   // path: goWork.map((i) => [i[0] - 0.00658, i[1] - 0.00575]),
    //   path: goWork,
    //   isOutline: true,
    //   outlineColor: '#62f',
    //   strokeColor: "#62f",
    //   borderWeight: 1,
    //   zIndex: 50,
    // })

    const linePath = [
        [115.886103, 28.64965],
        [115.885608, 28.649801],
        [115.885571, 28.6514],
        [115.887649, 28.651186],
        [115.888091, 28.653582],
        [115.888162, 28.655022],
        [115.887322, 28.655572],
        [115.885307, 28.655682],
        [115.885182, 28.655436],
        [115.885182, 28.655438],
        [115.885191, 28.65546],
        [115.884891, 28.655696],
        [115.884281, 28.655735],
        [115.882751, 28.655846],
        [115.882158, 28.655857],
        [115.881513, 28.655996],
        [115.881203, 28.656102],
        [115.880389, 28.655864],
        [115.87962, 28.653956],
        [115.879372, 28.652868],
        [115.880098, 28.652716],
        [115.880655, 28.652567],
        [115.881902, 28.652274],
        [115.884378, 28.651776],
        [115.886403, 28.651392],
        [115.888029, 28.65094],
        [115.888047, 28.650567],
        [115.888038, 28.650554],
        [115.888029, 28.650498],
        [115.887986, 28.646871],
        [115.888094, 28.644436],
        [115.887839, 28.641098],
        [115.88739, 28.638474],
        [115.887187, 28.637531],
        [115.886897, 28.63638],
        [115.885378, 28.633979],
        [115.886732, 28.631867],
        [115.890357, 28.630687],
        [115.891967, 28.629363],
        [115.89074, 28.627724],
        [115.889742, 28.626441],
        [115.888543, 28.62395],
        [115.888244, 28.621709],
        [115.888467, 28.619183],
        [115.888584, 28.618106],
        [115.88877, 28.616296],
        [115.888851, 28.61484],
        [115.88886, 28.614746],
        [115.88886, 28.614695],
        [115.888905, 28.614175],
        [115.888906, 28.61333],
        [115.888888, 28.612389],
        [115.888862, 28.611068],
        [115.888837, 28.610677],
        [115.888793, 28.608544],
        [115.88936, 28.606231],
        [115.889413, 28.606051],
        [115.889201, 28.60601],
        [115.888725, 28.604682],
        [115.888673, 28.602085],
        [115.888646, 28.599895],
        [115.888585, 28.597433],
        [115.888549, 28.595446],
        [115.888469, 28.594769],
        [115.88839, 28.594401],
        [115.887948, 28.591569],
        [115.887859, 28.590964],
        [115.887699, 28.589935],
        [115.887177, 28.58668],
        [115.887123, 28.586215],
        [115.886937, 28.585138],
        [115.88675, 28.583826],
        [115.88675, 28.583819],
        [115.886644, 28.583175],
        [115.886573, 28.582818],
        [115.886564, 28.582738],
        [115.88636, 28.581334],
        [115.886306, 28.581064],
        [115.886022, 28.578892],
        [115.885612, 28.575925],
        [115.885532, 28.575158],
        [115.885461, 28.574546],
        [115.885407, 28.573735],
        [115.885336, 28.573463],
        [115.885281, 28.57227],
        [115.885281, 28.572245],
        [115.885174, 28.570448],
        [115.885011, 28.567383],
        [115.887495, 28.567232],
        [115.891835, 28.567365],
        [115.894901, 28.567193],
        [115.894866, 28.566872],
        [115.894438, 28.563963],
        [115.894064, 28.561419],
        [115.894028, 28.561101],
        [115.894028, 28.561098],
        [115.893673, 28.55877],
        [115.893449, 28.556552],
        [115.893508, 28.553298],
        [115.893648, 28.551554],
        [115.89384, 28.548739],
        [115.893928, 28.548162],
        [115.893937, 28.548026],
        [115.894643, 28.547736],
        [115.895068, 28.547728],
        [115.897259, 28.547829],
        [115.898302, 28.547633],
        [115.897763, 28.547351],
        [115.897436, 28.547134],
        [115.897445, 28.547138],
        [115.897736, 28.547261],
        [115.898108, 28.547179],
        [115.898249, 28.54631],
        [115.89892, 28.546493],
      ]
    
    const lineRaw = turf.lineString(
      linePath,
    );
    const offsetLine = turf.lineOffset(lineRaw, 0.2, { units: "kilometers" });

     // 计算出边界
    var bbox = turf.bbox(lineRaw); // [-82, 35, -74, 42]
    // var bboxPolygon = turf.bboxPolygon(bbox);
    // 绘制矩形
    var bboxPolygon = turf.bboxPolygon(bbox);
    const leftBottom = [bbox[0], bbox[1]]
    const rightBottom = [bbox[2], bbox[1]]
    const rightTop = [bbox[2], bbox[3]]
    const leftTop = [bbox[0], bbox[3]]
    // polygon = new AMap.Polygon({
    //   map: map,
    //   fillOpacity: 0.4,
    //   // 左下角、右下、右上、左上
    //   // path: [[bbox[0], bbox[1]], [bbox[2], bbox[1]],   [bbox[2], bbox[3]], [bbox[0], bbox[3]]]
    //   path: [leftBottom, rightBottom, rightTop, leftTop]
    // });

    // new AMap.Polyline({
    //   map: map,
    //   path: linePath,
    //   isOutline: true,
    //   outlineColor: '#7f0',
    //   strokeColor: "#7f0",
    //   borderWeight: 1,
    //   zIndex: 50,
    // })


    // new AMap.Polyline({
    //   map: map,
    //   // 经度偏移、纬度偏移
    //   path: linePath.map((i) => [i[0] - 0.00658, i[1] - 0.00575]),
    //   isOutline: true,
    //   outlineColor: '#0ff',
    //   strokeColor: "#0ff",
    //   borderWeight: 1,
    //   zIndex: 50,
    // })


    const line1230 = [[115.846096,28.679706],[115.846096,28.679684],[115.846122,28.679542],[115.845971,28.679466],[115.846246,28.67972],[115.846663,28.67967],[115.846965,28.680179000000003],[115.847248,28.680923],[115.847638,28.682025],[115.848002,28.682743000000002],[115.848436,28.6827],[115.848712,28.682593],[115.849652,28.682216],[115.850698,28.681822],[115.851266,28.682013],[115.851957,28.682583],[115.852641,28.683051000000003],[115.85288,28.683175000000002],[115.853599,28.68347],[115.854698,28.683871],[115.856108,28.684422],[115.856489,28.684561000000002],[115.856489,28.684568000000002],[115.856525,28.684594],[115.857359,28.68488],[115.85849400000001,28.685301000000003],[115.859967,28.685897],[115.86104,28.686306000000002],[115.86222,28.686736],[115.863498,28.687218],[115.864198,28.687710000000003],[115.864456,28.687974],[115.864456,28.687981],[115.864633,28.688188],[115.865494,28.689316],[115.865946,28.689991000000003],[115.866514,28.690188000000003],[115.867277,28.689665],[115.868129,28.688886],[115.869327,28.687999],[115.870666,28.687124],[115.872282,28.686059],[115.87426,28.684798],[115.875742,28.683869],[115.876967,28.683046],[115.878183,28.682351],[115.87915100000001,28.682052000000002],[115.880224,28.681929],[115.881529,28.681975],[115.882497,28.682018],[115.883491,28.682089],[115.884849,28.682213],[115.885853,28.682312],[115.886803,28.682396],[115.887913,28.682486],[115.888605,28.682477000000002],[115.889573,28.682394000000002],[115.8904,28.682236],[115.890427,28.681923],[115.890435,28.681910000000002],[115.890435,28.681910000000002],[115.890444,28.681736],[115.890514,28.681253],[115.89053200000001,28.680826],[115.89063,28.680117],[115.890683,28.679574000000002],[115.89074600000001,28.679028000000002],[115.890817,28.678082],[115.890879,28.677662],[115.89087,28.677653],[115.89087,28.677658],[115.890906,28.677371],[115.891074,28.676859],[115.891393,28.676072],[115.891465,28.675551000000002],[115.890968,28.67535],[115.890177,28.675028],[115.889404,28.674597000000002],[115.888454,28.674117000000003],[115.887841,28.673959],[115.886909,28.673577],[115.886376,28.672861],[115.885896,28.672248],[115.88516800000001,28.67181],[115.884538,28.671704000000002],[115.884423,28.671689],[115.884405,28.671691000000003],[115.883588,28.67174],[115.882549,28.671756000000002],[115.881449,28.671742000000002],[115.880472,28.671654],[115.879575,28.671505],[115.878723,28.671355000000002],[115.877818,28.671223],[115.877002,28.671063],[115.876487,28.670830000000002],[115.876069,28.670397],[115.876434,28.669369],[115.876487,28.668905000000002],[115.875617,28.668572],[115.874613,28.668208],[115.87417,28.668075],[115.87417,28.668077],[115.873983,28.668035],[115.872644,28.667726000000002],[115.871491,28.667536000000002],[115.870834,28.667189],[115.86968,28.666494],[115.868748,28.665940000000003],[115.868171,28.66524],[115.867612,28.663986],[115.867018,28.662304000000002],[115.867044,28.66093],[115.867248,28.659251],[115.867568,28.657042],[115.867656,28.655375],[115.867434,28.653808],[115.866715,28.651854],[115.865943,28.650466],[115.865233,28.649081000000002],[115.864533,28.647599],[115.863929,28.646744],[115.864063,28.646219000000002],[115.865206,28.645762],[115.866218,28.645362000000002],[115.8673,28.644943],[115.867017,28.644034],[115.866697,28.643108],[115.866404,28.642209],[115.86612,28.641455],[115.866581,28.641247],[115.867407,28.641039],[115.868781,28.640726],[115.869643,28.640507],[115.87053,28.640278000000002],[115.871568,28.640011],[115.872153,28.639896],[115.872641,28.639723],[115.872668,28.639402],[115.872632,28.638969],[115.872597,28.638473]]
    // new AMap.Polyline({
    //   map: map,
    //   // 经度偏移、纬度偏移
    //   // path: line1230.map((i) => [i[0] - 0.00658, i[1] - 0.00575]),
    //   path: line1230,
    //   isOutline: true,
    //   outlineColor: '#fff',
    //   strokeColor: "#fff",
    //   borderWeight: 1,
    //   zIndex: 50,
    // })

    let line1231 = [[115.87533900000001,28.646974],[115.875595,28.64706],[115.875701,28.647101],[115.875692,28.64713],[115.875692,28.647132000000003],[115.87568300000001,28.647128000000002],[115.875658,28.646978],[115.875569,28.646863],[115.874933,28.646823],[115.874791,28.647059000000002],[115.87464,28.64725],[115.874296,28.647285],[115.87414600000001,28.647606],[115.874172,28.647995],[115.874171,28.648603],[115.87387100000001,28.648966],[115.87312800000001,28.649136000000002],[115.87257100000001,28.649251],[115.871864,28.649385000000002],[115.870812,28.64958],[115.869742,28.649807000000003],[115.86880400000001,28.650015],[115.86809600000001,28.650154],[115.867503,28.650284000000003],[115.86716700000001,28.650347],[115.867141,28.650343],[115.867114,28.650352],[115.866327,28.650518],[115.865485,28.650698000000002],[115.86507900000001,28.650797],[115.864096,28.650999000000002],[115.86300700000001,28.651221],[115.862316,28.651374],[115.86134100000001,28.651641],[115.86066000000001,28.651923],[115.86026100000001,28.652131],[115.860066,28.652354000000003],[115.860279,28.652753],[115.86030500000001,28.652764],[115.86030500000001,28.65276],[115.86058,28.653204000000002],[115.861395,28.653949],[115.862227,28.654503000000002],[115.863645,28.655031],[115.864326,28.655249],[115.86540600000001,28.65596],[115.866425,28.657401],[115.86700900000001,28.658404],[115.867523,28.659409],[115.86829300000001,28.660812],[115.868798,28.662036],[115.869099,28.663375000000002],[115.86915300000001,28.665313],[115.868995,28.666727],[115.86873100000001,28.668322],[115.86836100000001,28.670079],[115.849568,28.682253],[115.84820900000001,28.682554],[115.84711700000001,28.682788000000002],[115.84631800000001,28.682979],[115.846141,28.683514000000002],[115.84619400000001,28.683587],[115.846186,28.683587],[115.84627400000001,28.683757],[115.84630100000001,28.683791],[115.846292,28.6838],[115.84630100000001,28.6838],[115.846337,28.683825000000002],[115.846417,28.684003],[115.846889,28.684966],[115.84745000000001,28.686177],[115.847913,28.687136000000002],[115.848197,28.687799000000002],[115.84818,28.687879000000002],[115.8481,28.687922],[115.849237,28.688732],[115.849744,28.689347]]
    line1231 = line1231.map((i) => [i[0] - 0.0001, i[1] + 0.0002])
    new AMap.Polyline({
      map: map,
      // 经度偏移、纬度偏移
      // path: line1230.map((i) => [i[0] - 0.00658, i[1] - 0.00575]),
      path: line1231,
      isOutline: true,
      outlineColor: '#ff0',
      strokeColor: "#ff0",
      borderWeight: 1,
      zIndex: 50,
    })

  </script>
</body>

</html>